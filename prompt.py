import os
from openai import OpenAI
from dotenv import load_dotenv
import google.generativeai as genai

load_dotenv()

OPEN_API_KEY = os.environ.get("OPENAI_API_KEY")
GOOGLE_API_KEY = os.environ.get("GOOGLE_API_KEY")


client = OpenAI(
  organization='org-MOyA4Kg9FsqZo0vKg3oOtxf4',
  project='proj_Mmk1FL2VSTE9aJRwE5gElHlt',
  api_key=OPEN_API_KEY
)

genai.configure(api_key=GOOGLE_API_KEY)
model = genai.GenerativeModel("gemini-1.5-pro")
response = model.generate_content(
     """
    あなたは小説家です。ある人物の出来事を時系列で表示します。それを元に、その人物の伝記を作ってください。
    ワンピースのルフィっぽい口調で、一人称視点で書いてください。

    以下のことを守ってください。
    - 字数は合計で必ず5000文字程度にすること
    - 以下の5つの章に分けて出力し、各章は必ず1000文字程度にすること。各章の初めに以下のタイトルを必ず文字通り入れること
        幼少期の思い出:
        学生時代:
        社会人としての歩み:
        家族との時間:
        新たな挑戦:
    - 各章の終わりには"##"という文字列を必ず入れること。その他の場所で"#"という文字は絶対に使わないこと
    - プレーンテキストとして出力すること
    - 出力は必ず日本語で行うこと

    以下がその人物が記入した自分についての情報です。
            ```
1. 生まれたときのエピソード
a. 私は1974年、東京都杉並区の地元で評判の良い総合病院で生まれました。家族は私が初めての子供ということもあり、特に母が私の誕生を心待ちにしていたそうです。出産当日、祖父母も病院に駆けつけ、私が無事に生まれたことを知ってとても喜んでいたとのことです。父は普段は無口な人でしたが、私を初めて抱いたとき、思わず涙を流して「本当に小さいな、でもすごく重い責任を感じる」と言ったという話を後から聞きました。生まれて家に帰ると、近所の人たちもお祝いをしてくれて、実際に町内でも私の誕生はちょっとした話題になっていたようです。

2. 幼少期の思い出深い出来事や遊び、影響を受けた人物や出来事について
a. 幼少期はとても活発で、いつも外で遊んでいました。よく友達と公園でサッカーをしたり、近所の小川でカエルやザリガニを捕まえたりしていました。特に、夏休みに家族で行ったキャンプが思い出に残っています。父がテントを張るのを手伝ったり、夜にはみんなで焚き火を囲んで星を見たりしました。影響を受けた人物としては、祖父が強く印象に残っています。彼は戦後、復興のために苦労して働いた人で、何でも自分の力で解決しようとする姿勢がかっこよかったです。彼からは「困難に直面しても諦めるな」という教えを受け、それが私の生き方に大きく影響を与えました。

3. 小学校時代の思い出や好きだった科目、仲の良かった友人や先生について
a. 小学校時代は、いつも元気いっぱいで、クラスのムードメーカー的な存在でした。運動会や遠足、学芸会など、学校のイベントがあるたびにみんなでワイワイ騒いでいました。一番の思い出は、5年生の時に参加したリレー競走です。私は足が速い方ではなかったのですが、クラスメートの応援のおかげでアンカーを務め、何とか最後まで走り切ったときの達成感は今でも忘れられません。好きだった科目は図工で、特に粘土細工や絵を描くことに夢中になっていました。友達の中では田中君という同級生が特に仲が良く、放課後には一緒に駄菓子屋に行って遊んだり、家でゲームをしたりしていました。

4. 中学校での部活動や趣味、経験した困難や達成したことについて
a. 中学では野球部に所属しており、毎日の練習がとにかく厳しかったことを覚えています。特に1年生の時、先輩たちに追いつくために、技術的にも精神的にも苦労しました。しかし、2年生の夏に市の大会に出場した際、私は控え選手でしたが、試合の後半で代打として出場し、チームを逆転に導くヒットを打つことができました。この経験は自信となり、翌年にはレギュラーとして大会に挑み、準優勝まで進むことができました。部活動以外では、歴史に興味を持ち始め、日本の戦国時代の大名について本を読み漁りました。この時期に出会った教師の中では、特に歴史の先生が印象深いです。彼の授業はいつもわかりやすく、時にはジョークを交えながら、歴史の出来事をまるで物語のように語ってくれました。

5. 高校生活での大切な思い出や活動、影響を受けた本や映画について
a. 高校では文芸部に所属し、毎週友達と一緒に短編小説を書いたり、お互いの作品を批評し合う活動をしていました。文化祭では、部のメンバーと一緒に自作の詩集を作り、来場者に配布したことが特に思い出に残っています。また、校外では映画鑑賞が趣味で、特にスティーブン・スピルバーグの『シンドラーのリスト』を観たときは、強い衝撃を受けました。人間の善悪や、歴史の悲劇について深く考えさせられた作品であり、その後も何度も見返しました。この時期に読んだ本では、村上春樹の『ノルウェイの森』が心に残っています。登場人物たちの複雑な感情や、人生の儚さに共感し、感情の繊細さに触れた気がしました。

6. 大学で専攻した分野や興味を持ったこと、サークル活動やアルバイトについて
a. 大学では経済学を専攻し、特に国際経済やグローバリゼーションに関する研究に興味を持ちました。経済の世界が国境を越えて結びついていることに魅了され、将来は国際的な仕事に就きたいと思うようになりました。サークルではディベートサークルに参加し、毎週のように他大学とのディベート大会に出場していました。議論を通じて、相手の立場を理解し、自分の考えを論理的に伝える力を磨きました。アルバイトでは塾の講師をしており、特に数学を教えることにやりがいを感じていました。教えることの難しさと同時に、子どもたちが問題を解けた時の喜びは忘れられません。

7. 初めての仕事やキャリアの転機、社会人生活での学びや挑戦したことについて
a. 私の初めての仕事は、大手電機メーカーの営業職でした。営業の現場は思った以上に厳しく、当初は思うように成績を上げられず悩みました。特に新人時代、上司の期待に応えられない焦りやプレッシャーを強く感じ、何度も自分に失望しましたが、先輩から「失敗は成功の母」という言葉を教えられ、少しずつ前向きに取り組むようになりました。30代半ばで管理職に昇進したことが、キャリアの大きな転機となりました。部下を持つ責任と難しさを学びましたが、信頼関係を築くことの大切さを実感しました。また、この頃に初めて海外出張に行く機会があり、アジア諸国を訪れたことで、国際的な視野がさらに広がりました。

8. 結婚を決めた理由やプロポーズのエピソード、結婚生活で大切にしていることについて
a. 妻とは大学のサークル活動で知り合い、長い付き合いの中でお互いの性格や価値観がよく合うことに気付き、自然な流れで結婚を考えるようになりました。プロポーズは、二人でよく行っていたお気に入りのレストランで行いました。緊張して何度も言葉を飲み込みましたが、最後は手紙を読んで伝えました。結婚生活で大切にしていることは、コミュニケーションです。忙しい日々の中でも、毎晩少なくとも5分はしっかりとお互いの一日について話すようにしています。

9. 出産の経験やその時の気持ち、子育ての苦労や楽しさについて教えて
a. 子どもが生まれる前は、自分が父親になるという実感があまり湧いていませんでしたが、実際に生まれてきた我が子を抱いた瞬間、責任感と愛情が一気に押し寄せました。病院で初めて子どもと対面したとき、妻も涙を流していて、その姿を見て、家族の絆が深まったことを強く感じました。出産後の生活は大きく変わりました。特に最初の数ヶ月は、夜泣きやおむつ替えで睡眠不足が続き、妻と一緒に苦労しました。しかし、子どもの成長を見るたびにその苦労も報われ、初めて笑った時や、寝返りを打った瞬間など、小さな一つ一つの出来事が特別な喜びとして心に残っています。

10. 子供との思い出や教育方針、子供の成長を見て感じたことや学んだことについて
a. 子どもとの思い出はたくさんありますが、一番印象的なのは初めて家族旅行に行った時です。まだ幼かった息子を連れて、箱根に温泉旅行に出かけました。家族みんなで露天風呂に入って、息子が楽しそうに水をバシャバシャ叩いていた姿が今でも目に浮かびます。教育方針としては、子どもに好奇心を持たせ、失敗を恐れずに挑戦することを大切にしています。学校での勉強はもちろんですが、子どもが何かに興味を持った時にはその興味をできるだけサポートしてあげるようにしています。息子が科学に興味を持った時は、一緒に実験キットを買って家で実験をしたり、科学館に連れて行ったりしました。子どもの成長を見守る中で感じたことは、親としても一緒に成長しているということです。子どもが新しいことに挑戦する姿を見ると、自分ももっと努力しなければと刺激を受けます。

11. 現在の生活や趣味、今後の目標や夢について
a. 現在の生活は、仕事と家庭のバランスを大切にしながら、趣味の時間も楽しむようにしています。最近はジョギングを始め、毎朝早起きして近くの公園を走るのが日課です。また、週末には家族と一緒にキャンプに出かけたり、家庭菜園を楽しんだりしています。息子も成長し、一緒に釣りに行くことも増え、親子の時間を大切にしています。今後の目標としては、息子が自立するまでしっかりと支えていくことと、自分自身も新しい挑戦を続けたいと思っています。具体的には、以前から興味があった地域のボランティア活動に参加し、地元のコミュニティに貢献することを考えています。夢としては、定年後に妻と一緒に全国を旅して、各地の美しい風景や温泉を巡ることができれば最高です。
            ```
            """
)

with open("output.txt", "w") as f:
    f.write(response.text)

print(response.text)

# completion = client.chat.completions.create(
#     model="o1-mini",
#     messages=[
#         {"role": "system", "content": "You are a helpful assistant that writes biographies."},
#         {
#             "role": "user",
#             "content": 
#             """
#     あなたは小説家です。ある人物の出来事を時系列で表示します。それを元に、その人物の伝記を作ってください。
#     以下のことを守ってください。
#     - 字数は合計で必ず10000文字程度にすること
#     - 以下の5つの章に分けて出力し、各章は必ず2000文字程度にすること。各章の初めに以下のタイトルを必ず文字通り入れること
#         幼少期の思い出:
#         学生時代:
#         社会人としての歩み:
#         家族との時間:
#         新たな挑戦:
#     - 各章の終わりには"##"という文字列を必ず入れること。その他の場所で"#"という文字は絶対に使わないこと
#     - プレーンテキストとして出力すること
#     - 出力は必ず日本語で行うこと

#     以下がその人物が記入した自分についての情報です。
#             ```
# 1. 生まれたときのエピソード
# a. 私は1974年、東京都杉並区の地元で評判の良い総合病院で生まれました。家族は私が初めての子供ということもあり、特に母が私の誕生を心待ちにしていたそうです。出産当日、祖父母も病院に駆けつけ、私が無事に生まれたことを知ってとても喜んでいたとのことです。父は普段は無口な人でしたが、私を初めて抱いたとき、思わず涙を流して「本当に小さいな、でもすごく重い責任を感じる」と言ったという話を後から聞きました。生まれて家に帰ると、近所の人たちもお祝いをしてくれて、実際に町内でも私の誕生はちょっとした話題になっていたようです。

# 2. 幼少期の思い出深い出来事や遊び、影響を受けた人物や出来事について
# a. 幼少期はとても活発で、いつも外で遊んでいました。よく友達と公園でサッカーをしたり、近所の小川でカエルやザリガニを捕まえたりしていました。特に、夏休みに家族で行ったキャンプが思い出に残っています。父がテントを張るのを手伝ったり、夜にはみんなで焚き火を囲んで星を見たりしました。影響を受けた人物としては、祖父が強く印象に残っています。彼は戦後、復興のために苦労して働いた人で、何でも自分の力で解決しようとする姿勢がかっこよかったです。彼からは「困難に直面しても諦めるな」という教えを受け、それが私の生き方に大きく影響を与えました。

# 3. 小学校時代の思い出や好きだった科目、仲の良かった友人や先生について
# a. 小学校時代は、いつも元気いっぱいで、クラスのムードメーカー的な存在でした。運動会や遠足、学芸会など、学校のイベントがあるたびにみんなでワイワイ騒いでいました。一番の思い出は、5年生の時に参加したリレー競走です。私は足が速い方ではなかったのですが、クラスメートの応援のおかげでアンカーを務め、何とか最後まで走り切ったときの達成感は今でも忘れられません。好きだった科目は図工で、特に粘土細工や絵を描くことに夢中になっていました。友達の中では田中君という同級生が特に仲が良く、放課後には一緒に駄菓子屋に行って遊んだり、家でゲームをしたりしていました。

# 4. 中学校での部活動や趣味、経験した困難や達成したことについて
# a. 中学では野球部に所属しており、毎日の練習がとにかく厳しかったことを覚えています。特に1年生の時、先輩たちに追いつくために、技術的にも精神的にも苦労しました。しかし、2年生の夏に市の大会に出場した際、私は控え選手でしたが、試合の後半で代打として出場し、チームを逆転に導くヒットを打つことができました。この経験は自信となり、翌年にはレギュラーとして大会に挑み、準優勝まで進むことができました。部活動以外では、歴史に興味を持ち始め、日本の戦国時代の大名について本を読み漁りました。この時期に出会った教師の中では、特に歴史の先生が印象深いです。彼の授業はいつもわかりやすく、時にはジョークを交えながら、歴史の出来事をまるで物語のように語ってくれました。

# 5. 高校生活での大切な思い出や活動、影響を受けた本や映画について
# a. 高校では文芸部に所属し、毎週友達と一緒に短編小説を書いたり、お互いの作品を批評し合う活動をしていました。文化祭では、部のメンバーと一緒に自作の詩集を作り、来場者に配布したことが特に思い出に残っています。また、校外では映画鑑賞が趣味で、特にスティーブン・スピルバーグの『シンドラーのリスト』を観たときは、強い衝撃を受けました。人間の善悪や、歴史の悲劇について深く考えさせられた作品であり、その後も何度も見返しました。この時期に読んだ本では、村上春樹の『ノルウェイの森』が心に残っています。登場人物たちの複雑な感情や、人生の儚さに共感し、感情の繊細さに触れた気がしました。

# 6. 大学で専攻した分野や興味を持ったこと、サークル活動やアルバイトについて
# a. 大学では経済学を専攻し、特に国際経済やグローバリゼーションに関する研究に興味を持ちました。経済の世界が国境を越えて結びついていることに魅了され、将来は国際的な仕事に就きたいと思うようになりました。サークルではディベートサークルに参加し、毎週のように他大学とのディベート大会に出場していました。議論を通じて、相手の立場を理解し、自分の考えを論理的に伝える力を磨きました。アルバイトでは塾の講師をしており、特に数学を教えることにやりがいを感じていました。教えることの難しさと同時に、子どもたちが問題を解けた時の喜びは忘れられません。

# 7. 初めての仕事やキャリアの転機、社会人生活での学びや挑戦したことについて
# a. 私の初めての仕事は、大手電機メーカーの営業職でした。営業の現場は思った以上に厳しく、当初は思うように成績を上げられず悩みました。特に新人時代、上司の期待に応えられない焦りやプレッシャーを強く感じ、何度も自分に失望しましたが、先輩から「失敗は成功の母」という言葉を教えられ、少しずつ前向きに取り組むようになりました。30代半ばで管理職に昇進したことが、キャリアの大きな転機となりました。部下を持つ責任と難しさを学びましたが、信頼関係を築くことの大切さを実感しました。また、この頃に初めて海外出張に行く機会があり、アジア諸国を訪れたことで、国際的な視野がさらに広がりました。

# 8. 結婚を決めた理由やプロポーズのエピソード、結婚生活で大切にしていることについて
# a. 妻とは大学のサークル活動で知り合い、長い付き合いの中でお互いの性格や価値観がよく合うことに気付き、自然な流れで結婚を考えるようになりました。プロポーズは、二人でよく行っていたお気に入りのレストランで行いました。緊張して何度も言葉を飲み込みましたが、最後は手紙を読んで伝えました。結婚生活で大切にしていることは、コミュニケーションです。忙しい日々の中でも、毎晩少なくとも5分はしっかりとお互いの一日について話すようにしています。

# 9. 出産の経験やその時の気持ち、子育ての苦労や楽しさについて教えて
# a. 子どもが生まれる前は、自分が父親になるという実感があまり湧いていませんでしたが、実際に生まれてきた我が子を抱いた瞬間、責任感と愛情が一気に押し寄せました。病院で初めて子どもと対面したとき、妻も涙を流していて、その姿を見て、家族の絆が深まったことを強く感じました。出産後の生活は大きく変わりました。特に最初の数ヶ月は、夜泣きやおむつ替えで睡眠不足が続き、妻と一緒に苦労しました。しかし、子どもの成長を見るたびにその苦労も報われ、初めて笑った時や、寝返りを打った瞬間など、小さな一つ一つの出来事が特別な喜びとして心に残っています。

# 10. 子供との思い出や教育方針、子供の成長を見て感じたことや学んだことについて
# a. 子どもとの思い出はたくさんありますが、一番印象的なのは初めて家族旅行に行った時です。まだ幼かった息子を連れて、箱根に温泉旅行に出かけました。家族みんなで露天風呂に入って、息子が楽しそうに水をバシャバシャ叩いていた姿が今でも目に浮かびます。教育方針としては、子どもに好奇心を持たせ、失敗を恐れずに挑戦することを大切にしています。学校での勉強はもちろんですが、子どもが何かに興味を持った時にはその興味をできるだけサポートしてあげるようにしています。息子が科学に興味を持った時は、一緒に実験キットを買って家で実験をしたり、科学館に連れて行ったりしました。子どもの成長を見守る中で感じたことは、親としても一緒に成長しているということです。子どもが新しいことに挑戦する姿を見ると、自分ももっと努力しなければと刺激を受けます。

# 11. 現在の生活や趣味、今後の目標や夢について
# a. 現在の生活は、仕事と家庭のバランスを大切にしながら、趣味の時間も楽しむようにしています。最近はジョギングを始め、毎朝早起きして近くの公園を走るのが日課です。また、週末には家族と一緒にキャンプに出かけたり、家庭菜園を楽しんだりしています。息子も成長し、一緒に釣りに行くことも増え、親子の時間を大切にしています。今後の目標としては、息子が自立するまでしっかりと支えていくことと、自分自身も新しい挑戦を続けたいと思っています。具体的には、以前から興味があった地域のボランティア活動に参加し、地元のコミュニティに貢献することを考えています。夢としては、定年後に妻と一緒に全国を旅して、各地の美しい風景や温泉を巡ることができれば最高です。
#             ```
#             """
#         }
#     ]
# )

# with open("output.txt", "w") as f:
#     f.write(completion.choices[0].message.content)

# print(completion.choices[0].message)